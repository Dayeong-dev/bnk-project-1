<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>BNK 예적금 메인</title>
<style>
body {
	background: #f8f9fa;
	font-family: 'Noto Sans KR', sans-serif;
	margin: 0;
	padding: 0;
	display: flex;
	flex-direction: column;
	align-items: center;
}

/* 슬라이드 배너 */
.slider-container {
  position: relative;
  width: 90%;
  max-width: 800px;
  height: 220px;   /* 기존보다 20px 늘려 점 공간 확보 */
  overflow: hidden;
  border-radius: 10px;
  margin: 20px 0;
}

.slider {
  display: flex;
  width: 300%;
  transition: transform 0.5s ease;
}

.slide {
  width: 100%;
  object-fit: cover;
  display: none;
}

.slide.active {
  display: block;
}

/* 세련된 화살표 */
.slider-arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 28px;
  background: rgba(0, 0, 0, 0.3);
  color: white;
  border: none;
  padding: 10px 16px;
  border-radius: 50%;
  cursor: pointer;
  z-index: 2;
  transition: background 0.3s;
}

.slider-arrow:hover {
  background: rgba(0, 0, 0, 0.6);
}

.slider-arrow.left {
  left: 12px;
}

.slider-arrow.right {
  right: 12px;
}

/* 하단 dot */
.dots {
  position: absolute;
  bottom: 10px;        /* 슬라이더 하단에서 10px 위 */
  width: 100%;
  text-align: center;
  z-index: 3;
}

.dot {
  height: 10px;
  width: 10px;
  margin: 0 4px;
  background-color: #bbb;
  border-radius: 50%;
  display: inline-block;
  cursor: pointer;
  transition: background-color 0.3s;
}

.dot.active {
  background-color: #1565c0;
}


/* 메인 영역 */
.content-wrapper {
	display: flex;
	width: 90%;
	max-width: 1200px;
	align-items: stretch;
	gap: 20px;
	height: 330px;
}

.sidebar {
	width: 200px;
	display: flex;
	flex-direction: column;
	gap: 5px;
}

.purpose-btn {
	height: 105px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: #f1f3f5;
	color: #212529;
	font-weight: 500;
	font-size: 17px;
	text-decoration: none;
	cursor: pointer;
	transition: background 0.2s, color 0.2s;
	position: relative;
}

.purpose-btn.active {
	background: #1565c0;
	color: white;
}

.purpose-btn.active::after {
	content: "";
	position: absolute;
	top: 50%;
	right: -10px;
	transform: translateY(-50%);
	width: 0;
	height: 0;
	border-top: 10px solid transparent;
	border-bottom: 10px solid transparent;
	border-left: 10px solid #1565c0;
}

.recommend-wrapper {
	flex: 1;
	display: flex;
	gap: 10px;
	height: 100%;
}

.highlight-product {
	flex: 0 0 30%;
	background: #fff3f3;
	border: 1px solid #f8d7da;
	border-radius: 8px;
	padding: 10px;
	text-align: center;
	cursor: pointer;
	display: flex;
	flex-direction: column;
	justify-content: center;
	font-size: 13px;
}

.grid-cards {
	flex: 1;
	display: grid;
	grid-template-columns: 1fr 1fr;
	grid-template-rows: 1fr 1fr;
	gap: 8px;
}

.card {
	background: #fff3f3;
	border: 1px solid #f8d7da;
	border-radius: 8px;
	padding: 8px;
	text-align: center;
	cursor: pointer;
	display: flex;
	flex-direction: column;
	justify-content: center;
	font-size: 12px;
}

.highlight-product:hover, .card:hover {
	background: #ffeaea;
}
/* 검색 */
.search-section {
	width: 100%;
	background: #f1f3f5; /* 연한 회색 배경 */
	padding: 30px 20px; /* 상하 충분히 여백 */
	display: flex;
	justify-content: center;
	align-items: center;
	gap: 10px;
	flex-wrap: wrap;
	border-radius: 8px;
	box-sizing: border-box;
}

.search-form {
	display: flex;
	width: 100%;
	max-width: 500px;
	position: relative;
}

.search-input {
	flex: 1;
	padding: 14px 50px 14px 20px;
	border: 1px solid #ccc;
	border-radius: 30px;
	font-size: 15px;
	outline: none;
	transition: border 0.3s, box-shadow 0.3s;
}

.search-input:focus {
	border-color: #1565c0;
	box-shadow: 0 0 0 2px rgba(21, 101, 192, 0.2);
}

.search-icon {
	position: absolute;
	top: 50%;
	right: 18px;
	transform: translateY(-50%);
	background: none;
	border: none;
	cursor: pointer;
	width: 22px;
	height: 22px;
	background-image:
		url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'%3E%3C/circle%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'%3E%3C/line%3E%3C/svg%3E");
	background-repeat: no-repeat;
	background-size: contain;
	background-position: center;
	padding: 0;
}

.hashtag-button {
	background: #e0e3e7;
	border: none;
	border-radius: 20px;
	padding: 10px 16px;
	font-size: 14px;
	cursor: pointer;
	transition: background 0.2s;
	white-space: nowrap;
}

.hashtag-button:hover {
	background: #cfd2d6;
}

/* 테마추천영역 */
/* 테마 버튼 */
.theme-btn {
	padding: 12px 22px;
	border: none;
	border-radius: 20px;
	background: #f1f3f5;
	color: #212529;
	font-size: 15px;
	font-weight: 500;
	cursor: pointer;
	transition: background 0.2s, color 0.2s;
}

.theme-btn:hover {
	background: #e0e0e0;
}

.active-theme {
	background: #1565c0;
	color: white;
	font-weight: 600;
}

/* 테마 슬라이드 컨테이너 */
.theme-slider-container {
	width: 95%;
	max-width: 1200px;
	margin: 40px auto;
	position: relative;
}

/* 테마 카드 */
.theme-card {
	background: white;
	border: 1px solid #dee2e6;
	border-radius: 12px;
	padding: 25px;
	width: 320px;
	height: 260px;
	cursor: pointer;
	text-align: center;
	transition: transform 0.2s, box-shadow 0.2s, background 0.2s;
	display: flex;
	flex-direction: column;
	justify-content: center;
}

.theme-card:hover {
	transform: translateY(-8px);
	box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
	background: #fdfdfd;
}

.theme-card h4 {
	margin: 12px 0 8px;
	font-size: 22px;
	font-weight: 700;
	color: #212529;
}

.theme-card p {
	margin: 6px 0;
	font-size: 16px;
	color: #555;
	word-break: keep-all;
}

.theme-card .rate {
	color: #1565c0;
	font-weight: 700;
	font-size: 18px;
}

/* 좌우 버튼 */
.theme-prev, .theme-next {
	background: rgba(0, 0, 0, 0.5);
	color: white;
	border: none;
	padding: 10px 15px;
	font-size: 22px;
	cursor: pointer;
	border-radius: 50%;
	position: absolute;
	top: 50%;
	transform: translateY(-50%);
	transition: background 0.2s;
}

.theme-prev {
	left: -40px;
}

.theme-next {
	right: -40px;
}

.theme-prev:hover, .theme-next:hover {
	background: rgba(0, 0, 0, 0.7);
}
</style>
</head>
<body>

	
	<!-- ✅ 상단 슬라이드 배너 -->
<div class="slider-container">
  <div class="slider" id="slider">
    <img src="/images/potato.jpg" class="slide active">
    <img src="/images/potato1.jpg" class="slide">
    <img src="/images/potato2.jpg" class="slide">
    
    <!-- ✅ 하단 점 표시 -->
  
  </div>
  
  <!-- ✅ 세련된 화살표 -->
  <button class="slider-arrow left" onclick="prevSlide()">&#10094;</button>
  <button class="slider-arrow right" onclick="nextSlide()">&#10095;</button>

  <!-- ✅ 하단 dot 표시 -->
  <div class="dots">
    <span class="dot active" onclick="setSlide(0)"></span>
    <span class="dot" onclick="setSlide(1)"></span>
    <span class="dot" onclick="setSlide(2)"></span>
  </div>
</div>


	<!-- ✅ 메인 콘텐츠 -->
	<div class="content-wrapper">

		<!-- 목적 사이드바 -->
		<div class="sidebar">
			<a th:href="@{/deposit/main(category='적금')}"
				th:classappend="${selectedCategory} == '적금' ? 'active' : ''"
				class="purpose-btn">목돈만들기</a> <a
				th:href="@{/deposit/main(category='예금')}"
				th:classappend="${selectedCategory} == '예금' ? 'active' : ''"
				class="purpose-btn">목돈굴리기</a> <a
				th:href="@{/deposit/main(category='입출금자유')}"
				th:classappend="${selectedCategory} == '입출금자유' ? 'active' : ''"
				class="purpose-btn">입출금자유</a>

		</div>

		<!-- 추천상품 영역 -->
		<div class="recommend-wrapper">

			<!-- 강력추천 -->
			<div th:if="${highlightProduct != null}" class="highlight-product"
				th:onclick="'window.location.href=\'/deposit/detail/' + ${highlightProduct.productId} + '\''">
				<h4 th:text="${highlightProduct.name}">강력추천 상품명</h4>
				<p th:text="${highlightProduct.summary}">상품 설명</p>
				<p>
					최고 <b th:text="${highlightProduct.maxRate}">0.00</b>% / 최저 <b
						th:text="${highlightProduct.minRate}">0.00</b>%
				</p>
				<p>
					<b th:text="${highlightProduct.period}">0</b>개월
				</p>
			</div>

			<!-- 추천상품 4개 2x2 -->
			<div class="grid-cards">
				<div class="card" th:each="product : ${otherProducts}"
					th:onclick="'window.location.href=\'/deposit/detail/' + ${product.productId} + '\''">
					<h4 th:text="${product.name}">추천 상품명</h4>
					<p>
						최고 <b th:text="${product.maxRate}">0.00</b>% / 최저 <b
							th:text="${product.minRate}">0.00</b>%
					</p>
					<p>
						<b th:text="${product.period}">0</b>개월
					</p>
				</div>
			</div>

		</div>

	</div>
	<!-- 검색바 섹션 -->
	<div class="search-section">
		<form id="searchForm" action="/deposit/list" method="get"
			class="search-form">
			<input type="text" name="keyword" placeholder="검색어를 입력하세요"
				class="search-input">
			<button type="submit" class="search-icon" aria-label="검색"></button>
		</form>
		<button class="hashtag-button" onclick="searchHashtag('적금')">#적금</button>
		<button class="hashtag-button" onclick="searchHashtag('예금')">#예금</button>
	</div>


	<!-- ✅ Theme 맞춤 추천 영역 -->
	<div class="theme-slider-container">
		<!-- 테마 선택 버튼 -->
		<div
			style="display: flex; justify-content: center; gap: 12px; margin-bottom: 20px;">
			<button class="theme-btn" onclick="showTheme('주부')" id="btn-주부">주부</button>
			<button class="theme-btn active-theme" onclick="showTheme('직장인')"
				id="btn-직장인">직장인</button>
			<button class="theme-btn" onclick="showTheme('학생')" id="btn-학생">학생</button>
		</div>

		<!-- 좌우 넘김 버튼 -->
		<button class="theme-prev" onclick="prevTheme()">❮</button>

		<!-- 슬라이드 그룹 -->
		<div class="theme-slider" id="themeSlider">
			<!-- 직장인 -->
			<div class="theme-slide-group" id="theme-직장인"
				style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
				<div th:each="p : ${workerProducts}" class="theme-card"
					th:onclick="'location.href=\'/deposit/detail/' + ${p.productId} + '\''">
					<h4 th:text="${p.name}">상품명</h4>
					<p th:text="${p.summary}">상품 요약</p>
					<p class="rate" th:text="'최고 ' + ${p.maxRate} + '%'">최고 금리</p>
				</div>
			</div>
			<!-- 주부 -->
			<div class="theme-slide-group" id="theme-주부"
				style="display: none; gap: 20px; justify-content: center; flex-wrap: wrap;">
				<div th:each="p : ${housewifeProducts}" class="theme-card"
					th:onclick="'location.href=\'/deposit/detail/' + ${p.productId} + '\''">
					<h4 th:text="${p.name}">상품명</h4>
					<p th:text="${p.summary}">상품 요약</p>
					<p class="rate" th:text="'최고 ' + ${p.maxRate} + '%'">최고 금리</p>
				</div>
			</div>
			<!-- 학생 -->
			<div class="theme-slide-group" id="theme-학생"
				style="display: none; gap: 20px; justify-content: center; flex-wrap: wrap;">
				<div th:each="p : ${studentProducts}" class="theme-card"
					th:onclick="'location.href=\'/deposit/detail/' + ${p.productId} + '\''">
					<h4 th:text="${p.name}">상품명</h4>
					<p th:text="${p.summary}">상품 요약</p>
					<p class="rate" th:text="'최고 ' + ${p.maxRate} + '%'">최고 금리</p>
				</div>
			</div>
		</div>

		<button class="theme-next" onclick="nextTheme()">❯</button>
	</div>







	<script>
document.addEventListener("DOMContentLoaded", function () {
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const dots = document.querySelectorAll('.dot');

    function showSlide(index) {
        slides.forEach((slide, i) => {
            slide.classList.toggle('active', i === index);
        });
        dots.forEach((dot, i) => {
            dot.classList.toggle('active', i === index);
        });
        currentSlide = index;
    }

    function nextSlide() {
        const nextIndex = (currentSlide + 1) % slides.length;
        showSlide(nextIndex);
    }

    function prevSlide() {
        const prevIndex = (currentSlide - 1 + slides.length) % slides.length;
        showSlide(prevIndex);
    }

    // ✅ setSlide 함수 정의
    window.setSlide = function(index) {
        showSlide(index);
    }

    // ✅ 화살표 이벤트 연결 (클래스 이름 정확히 지정)
    document.querySelector(".slider-arrow.left").addEventListener("click", prevSlide);
    document.querySelector(".slider-arrow.right").addEventListener("click", nextSlide);

    // ✅ 점(dot) 클릭 이벤트 연결 (이미 HTML에서 onclick 있으니 생략 가능)
    dots.forEach((dot, i) => {
        dot.addEventListener("click", () => {
            showSlide(i);
        });
    });

    // ✅ 자동 슬라이드
    setInterval(nextSlide, 4000);
    showSlide(0);

    // ✅ 해시태그 검색
    window.searchHashtag = function(tag) {
        window.location.href = "/deposit/list?keyword=" + encodeURIComponent(tag);
    };

    // ✅ 테마 전환
    const themes = ['주부', '직장인', '학생'];
    let currentThemeIndex = themes.indexOf('직장인');

    function showTheme(theme) {
        themes.forEach(t => {
            const elem = document.getElementById('theme-' + t);
            const btn = document.getElementById('btn-' + t);
            if (t === theme) {
                elem.style.display = 'flex';
                btn.classList.add('active-theme');
                currentThemeIndex = themes.indexOf(t);
            } else {
                elem.style.display = 'none';
                btn.classList.remove('active-theme');
            }
        });
    }

    window.prevTheme = function() {
        currentThemeIndex = (currentThemeIndex - 1 + themes.length) % themes.length;
        showTheme(themes[currentThemeIndex]);
    };

    window.nextTheme = function() {
        currentThemeIndex = (currentThemeIndex + 1) % themes.length;
        showTheme(themes[currentThemeIndex]);
    };

    showTheme('직장인');
});
</script>



</body>
</html>
